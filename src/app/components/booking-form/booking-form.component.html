<div class="form-container">
  
  <div class="form-header">
    <h2>{{ isEdit ? 'Termin bearbeiten' : 'Neue Buchung' }}</h2>
    <button class="btn-ghost" type="button" (click)="cancel()">Abbrechen</button>
  </div>

  <form [formGroup]="form" (ngSubmit)="save()" class="booking-form">
    
    <div class="form-group full-width">
      <label for="title">Titel <span class="required">*</span></label>
      <input id="title" type="text" formControlName="title" placeholder="z.B. Projektbesprechung" 
             [class.error]="isFieldInvalid('title')">
      
      <div class="error-msg" *ngIf="isFieldInvalid('title')">
        Titel ist erforderlich.
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="date">Datum <span class="required">*</span></label>
        <input id="date" type="date" formControlName="date" 
               [class.error]="isFieldInvalid('date')">
      </div>

      <div class="form-group">
        <label for="time">Uhrzeit <span class="required">*</span></label>
        <input id="time" type="time" formControlName="time">
      </div>
    </div>

    <div class="form-row three-cols">
      <div class="form-group">
        <label for="personName">Person (gebucht für)</label>
        <input id="personName" type="text" formControlName="personName" placeholder="Max Mustermann">
      </div>

      <div class="form-group">
        <label for="withWhom">Mit wem</label>
        <input id="withWhom" type="text" formControlName="withWhom" placeholder="Name">
      </div>

      <div class="form-group">
        <label for="duration">Dauer (Min)</label>
        <input id="duration" type="number" formControlName="duration" placeholder="60">
      </div>
    </div>
    <div class="form-group">
      <label for="email">E-mail</label>
      <input id="email" type="email" formControlName="email" placeholder="E-mail eingeben">
    </div>

    <div class="form-group full-width">
      <label for="purpose">Zweck / Beschreibung</label>
      <textarea id="purpose" formControlName="purpose" rows="4" placeholder="Worum geht es in dem Termin?"></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary" [disabled]="form.invalid">
        {{ isEdit ? 'Änderungen speichern' : 'Termin anlegen' }}
      </button>
    </div>

  </form>
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  
  <div class="modal-card" (click)="$event.stopPropagation()">
    
    <div class="modal-header" [class.error]="modalType === 'error'">
      <h3>{{ modalTitle }}</h3>
      <button class="close-btn" (click)="closeModal()">✖</button>
    </div>

    <div class="modal-body">
      
      <div class="status-icon" [class.error]="modalType === 'error'">
        <i class="bi" 
           [class.bi-check-circle-fill]="modalType === 'success'" 
           [class.bi-exclamation-triangle-fill]="modalType === 'error'">
        </i>
      </div>

      <p class="message-text">{{ modalMessage }}</p>

      <button class="btn-primary" (click)="closeModal()">Verstanden</button>
    </div>

  </div>
</div>
</div>